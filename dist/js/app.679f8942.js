(function(t){function e(e){for(var o,i,n=e[0],c=e[1],l=e[2],u=0,p=[];u<n.length;u++)i=n[u],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);d&&d(e);while(p.length)p.shift()();return a.push.apply(a,l||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],o=!0,n=1;n<s.length;n++){var c=s[n];0!==r[c]&&(o=!1)}o&&(a.splice(e--,1),t=i(i.s=s[0]))}return t}var o={},r={app:0},a=[];function i(e){if(o[e])return o[e].exports;var s=o[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=o,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(s,o,function(e){return t[e]}.bind(null,o));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/LAB8_10/dist/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=e,n=n.slice();for(var l=0;l<n.length;l++)e(n[l]);var d=c;a.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0d7b":function(t,e,s){"use strict";s.d(e,"a",(function(){return o})),s.d(e,"b",(function(){return r}));var o=function(){var t=this;t._self._c,t._self._setupProxy;return t._m(0)},r=[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{attrs:{id:"app"}},[e("body",[e("div",{attrs:{id:"header"}},[e("div",{staticClass:"subHeader"},[e("div",{staticClass:"container-fluid",staticStyle:{"padding-top":"1ex"}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-4"},[e("nav",{staticStyle:{"--bs-breadcrumb-divider":"'/'"},attrs:{"aria-label":"breadcrumb"}},[e("ol",{staticClass:"breadcrumb"},[t._v(" {if isset($USER)} "),e("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v("/{$USER.name}")]),t._v(" {else} "),e("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v("/home")]),t._v(" {/if} ")])])]),e("div",{staticClass:"col-8",staticStyle:{"text-align":"right"}},[t._v(" {if isset($USER)} "),e("a",{attrs:{href:"./logout_action.php"}},[t._v("logout")]),e("a",{attrs:{href:"#"}},[t._v("post blog")]),t._v(" {else} "),e("a",{attrs:{href:"./login.php"}},[t._v("login")]),e("a",{attrs:{href:"./register.php"}},[t._v("register")]),t._v(" {/if} "),e("a",{attrs:{href:"#"}},[t._v('Welcome {$USER.name|default:"anon"}')])])])])])]),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"container"},[e("h1",{staticClass:"blogName"},[t._v("Inside the Walls")]),e("div",{staticClass:"row"},[t._v(" {foreach $MICROPOSTS as $micropost} "),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"blogPost"},[e("div",{staticClass:"card"},[e("img",{staticClass:"card-img-top",attrs:{src:"images/IamMarinush.png",alt:"ruka"}}),e("div",{staticClass:"card-body"},[e("h4",{staticClass:"card-title"},[e("strong",[t._v("{$micropost.title}")])]),e("div",{staticClass:"multi-collapse{$micropost.id} collapse show",attrs:{id:"multiCollapseExample1{$micropost.id}"}},[e("p",{staticClass:"card-text text-truncate"},[t._v(" {$micropost.content} ")])]),e("p",[e("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-toggle":"button","data-bs-toggle":"collapse","data-bs-target":".multi-collapse{$micropost.id}","aria-expanded":"false","aria-controls":"multiCollapseExample1{$micropost.id} multiCollapseExample2{$micropost.id}",autocomplete:"off"}},[t._v(" Expand ")])]),e("div",{staticClass:"multi-collapse{$micropost.id} collapse",attrs:{id:"multiCollapseExample2{$micropost.id}"}},[e("div",{staticClass:"card-body"},[e("p",{staticClass:"card-text"},[t._v(" {$micropost.content} ")])])]),e("div",{staticClass:"row",staticStyle:{"padding-left":"30px"}},[e("div",{staticClass:"col-12"},[e("p",[t._v("by {$NAMES[$micropost.user_id]}")])]),e("div",{staticClass:"col"},[e("p",[t._v(' Created: {$micropost.created_at|date_format:"%d-%m-%Y"} ')])]),e("div",{staticClass:"col"},[e("p",[t._v(' Updated: {$micropost.updated_at|date_format:"%d-%m-%Y"} ')])]),e("div",{staticClass:"col"},[t._v(" {if $USER.id eq $micropost.user_id} "),e("a",{staticClass:"card-link",attrs:{href:"#"}},[t._v("update")]),t._v(" {/if} ")])])])])])]),t._v(" {/foreach} ")])])]),e("footer",{staticClass:"footer bg-light text-center"},[e("div",{staticClass:"text-center p-3",staticStyle:{"background-color":"rgba(0, 0, 0, 0.2)"}},[t._v(" © 2022 Copyright: Quevin Protsenko IPM ")])])])])}]},"2c43":function(t,e,s){"use strict";s("a18f")},4258:function(t,e,s){},"4a73":function(t,e,s){"use strict";s("4258")},"56d7":function(t,e,s){"use strict";s.r(e);var o=s("2b0e"),r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"small-container",attrs:{id:"app"}},[e("router-view")],1)},a=[],i=(s("2c43"),s("2877")),n={},c=Object(i["a"])(n,r,a,!1,null,null,null),l=c.exports,d=s("2f62");const u={namespaced:!0,state:{microposts:[]},getters:{getMicroposts(t){return t.microposts},getMicropost:t=>e=>{let s=t.microposts.findIndex(t=>t.id==e);return t.microposts[s]}},mutations:{addMicroposts(t,e){t.microposts=e},addMicropost(t,e){t.microposts=[...t.microposts,e]},updateMicropost(t,e){t.microposts=t.microposts.map(t=>t.id===e.id?e:t)},deleteMicropost(t,e){t.microposts.forEach((function(){t.microposts=t.microposts.filter((function(t){return t.id!==e}))}))},deleteMicroposts(t){t.microposts=[]}},actions:{async getMicroposts({commit:t}){try{const e=await fetch("http://daw.deei.fct.ualg.pt/~a71311/LAB8_10/api/microposts.php"),s=await e.json();return t("addMicroposts",s),!0}catch(e){return console.error(e),!1}},async addMicropost({commit:t,rootGetters:e},s){try{const o=await fetch("http://daw.deei.fct.ualg.pt/~a71311/LAB8_10/api/microposts.php?session_id="+e["user/getUser"].session_id,{method:"POST",body:JSON.stringify(s),headers:{"Content-type":"application/json; charset=UTF-8"}}),r=await o.json();return console.log(r),t("addMicropost",r),!0}catch(o){return console.error(o),!1}},async updateMicropost({commit:t,rootGetters:e},s){try{const o=await fetch(`http://daw.deei.fct.ualg.pt/~a71311/LAB8_10/api/microposts.php?micropost_id=${s.id}&session_id=${e["user/getUser"].session_id}`,{method:"PUT",body:JSON.stringify(s),headers:{"Content-type":"application/json; charset=UTF-8"}}),r=await o.json();return console.log(r),t("updateMicropost",r),!0}catch(o){return console.error(o),!1}},async deleteMicropost({commit:t,rootGetters:e},s){try{return await fetch(`http://daw.deei.fct.ualg.pt/~a71311/LAB8_10/api/microposts.php?micropost_id=${s}&session_id=${e["user/getUser"].session_id}`,{method:"DELETE"}),t("deleteMicropost",s),!0}catch(o){return console.error(o),!1}}},modules:{}};var p=u;const m={namespaced:!0,state:{user:{},tmp_user:{}},getters:{getUser(t){return t.user}},mutations:{loginUser(t,e){t.user=e},logoutUser(t){t.user={}},tmpUser(t,e){t.tmp_user=e}},actions:{async userExists({commit:t},e){try{const s=await fetch("http://daw.deei.fct.ualg.pt/~a71311/LAB8_10/api/users.php?email="+e.email,{method:"GET"}),o=await s.json();return console.log(o),null!==o?(alert("Email already exists"),!0):(t("tmpUser",e),!1)}catch(s){return console.error(s),alert("Error: Database connection failed in phase 1"),!1}},async addUser({state:t}){try{const e=await fetch("http://daw.deei.fct.ualg.pt/~a71311/LAB8_10/api/users.php",{method:"POST",body:JSON.stringify(t.tmp_user),headers:{"Content-type":"text/html; charset=UTF-8"}}),s=await e.json();return console.log("received data:",s),!0}catch(e){return console.error(e),alert("Error: Database connection failed in phase 2"),!1}},async loginUser({commit:t},e){try{const s=await fetch(`http://daw.deei.fct.ualg.pt/~a71311/LAB8_10/api/users.php?email=${e.email}&password=${e.password}`),o=await s.json();return null==o?(alert("Error: Wrong credentials"),!1):(console.log("received data:",o),t("loginUser",o),!0)}catch(s){return console.error(s),alert("Error: Database connection failed"),!1}},async logoutUser({commit:t},e){try{const s=await fetch("http://daw.deei.fct.ualg.pt/~a71311/LAB8_10/api/users.php?session_id="+e),o=await s.json();return console.log("received data:",o),t("logoutUser"),!0}catch(s){return console.error(s),!1}}}};var f=m;const h={namespaced:!0,state:{comments:[]},getters:{getComments(t){return t.comments},getPostComments:t=>e=>{const s=t.comments.filter(t=>t.micropost_id==e);return s}},mutations:{addComments(t,e){t.comments=e},addComment(t,e){t.comments=[...t.comments,e]}},actions:{async getComments({commit:t}){try{const e=await fetch("http://daw.deei.fct.ualg.pt/~a71311/LAB8_10/api/comments.php"),s=await e.json();return t("addComments",s),!0}catch(e){return console.error(e),!1}},async addComment({commit:t,rootGetters:e},s){try{const o=await fetch(`http://daw.deei.fct.ualg.pt/~a71311/LAB8_10/api/comments.php?micropost_id=${s.post_id}&session_id=${e["user/getUser"].session_id}`,{method:"POST",body:JSON.stringify(s.post),headers:{"Content-type":"application/json; charset=UTF-8"}}),r=await o.json();return console.log(r),t("addComment",r),!0}catch(o){return console.error(o),!1}}},modules:{}};var v=h;o["a"].use(d["a"]);var g=new d["a"].Store({modules:{microposts:p,user:f,comments:v}}),_=s("8c4f"),b=function(){var t=this,e=t._self._c;return e("div",[e("Menu"),e("Footer")],1)},y=[],C=function(){var t=this;t._self._c;return t._m(0)},w=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6",staticStyle:{"text-align":"left"}},[t._v(" © 2022 Interfaces Pessoa-Máquina ")]),e("div",{staticClass:"col-md-6",staticStyle:{"text-align":"right"}},[t._v(" Designed by "),e("a",{attrs:{href:"#"}},[t._v("Aluno")])])])])}],$={},x=Object(i["a"])($,C,w,!1,null,null,null),S=x.exports,M=function(){var t=this,e=t._self._c;return e("div")},j=[],O={data(){return{user:{id:"",name:"",email:"",session_id:""}}},mounted(){},methods:{},computed:{}},U=O,P=Object(i["a"])(U,M,j,!1,null,null,null),E=P.exports,F={components:{Footer:S,Menu:E},data(){return{microposts:[],comments:[],user:{id:"",name:"",email:"",session_id:""},show:""}},mounted(){},methods:{},computed:{}},L=F,T=Object(i["a"])(L,b,y,!1,null,"5e4b5548",null),A=T.exports,B=function(){var t=this,e=t._self._c;return e("div",[e("Menu"),e("Footer")],1)},k=[],I={components:{Footer:S,Menu:E},data(){return{user:{name:"",email:"",password:""},passwordConfirmation:"",submitting:!0,error:!0}},methods:{},computed:{},directives:{},created(){}},N=I,D=Object(i["a"])(N,B,k,!1,null,"0d849cf0",null),J=D.exports,R=function(){var t=this,e=t._self._c;return e("div",{staticClass:"logout"},[e("h1",{staticClass:"success-message",staticStyle:{"text-align":"center"}},[t._v(t._s(t.message))])])},G=[],W=(s("14d9"),{data(){return{message:""}},mounted(){this.setMessage()},methods:{setMessage(){1==this.$route.params.id&&(this.message="Success: Post updated"),2==this.$route.params.id&&(this.message="Success: User deleted"),3==this.$route.params.id&&(this.message="Success: Post added to database"),4==this.$route.params.id&&(this.message="Welcome! You can now login"),5==this.$route.params.id&&(this.message="Welcome back "+this.$store.getters["user/getUser"].name+"!"),6==this.$route.params.id&&(this.message="Bye, come back soon!"),7==this.$route.params.id&&(this.message="Success: Comment added to database");var t=2,e=setInterval(()=>{t<=0&&(clearInterval(e),this.$router.push("/")),t-=1},1e3)}}}),q=W,Y=(s("d131"),Object(i["a"])(q,R,G,!1,null,"3297f438",null)),H=Y.exports,Q=function(){var t=this,e=t._self._c;return e("div",[e("Menu"),e("Footer")],1)},z=[],K={components:{Footer:S,Menu:E},data(){return{user:{email:"",password:""},submitting:!1,error:!1}},methods:{},computed:{},directives:{},created(){}},V=K,X=Object(i["a"])(V,Q,z,!1,null,"78b8bdfd",null),Z=X.exports,tt=function(){var t=this,e=t._self._c;return e("div")},et=[],st={data(){return{success:!1,user:{}}},methods:{},created:function(){},computed:{}},ot=st,rt=Object(i["a"])(ot,tt,et,!1,null,"41cf618c",null),at=rt.exports,it=function(){var t=this,e=t._self._c;return e("div",[e("Menu"),e("Footer")],1)},nt=[],ct={components:{Footer:S,Menu:E},data(){return{submitting:!1,error:!1,post:{content:""},user:{id:"",name:"",email:"",session_id:""}}},created:function(){},methods:{},computed:{},directives:{}},lt=ct,dt=Object(i["a"])(lt,it,nt,!1,null,"01f8ddac",null),ut=dt.exports,pt=function(){var t=this,e=t._self._c;return e("div",[e("Menu"),e("Footer")],1)},mt=[],ft={components:{Footer:S,Menu:E},data(){return{submitting:!1,error:!1,post:{id:"",content:"",user_id:"",author:"",created_at:"",updated_at:"",likes:""},user:{id:"",name:"",email:"",session_id:""}}},created:function(){},methods:{},computed:{},directives:{}},ht=ft,vt=Object(i["a"])(ht,pt,mt,!1,null,"638c0124",null),gt=vt.exports,_t=function(){var t=this,e=t._self._c;return e("div",[e("Menu"),e("div",{staticClass:"container",attrs:{id:"post-form"}},[t.userLoggedIn?e("div",[e("h1",{staticStyle:{"text-align":"center"}},[t._v("Comment Post")]),e("br"),e("br"),e("form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[e("div",{staticClass:"form-group"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment.content,expression:"comment.content"},{name:"autofocus",rawName:"v-autofocus"}],ref:"first",staticClass:"form-control",class:{"has-error":t.submitting&&t.invalidContent},attrs:{rows:"5",placeholder:"Please enter at least 10 characters"},domProps:{value:t.comment.content},on:{input:function(e){e.target.composing||t.$set(t.comment,"content",e.target.value)}}})]),t.error&&t.submitting?e("p",{staticClass:"alert alert-warning"},[t._v(" fill out all required fields with valid data ")]):t._e(),e("p",{staticStyle:{float:"left"}},[e("button",{staticClass:"btn btn-warning",on:{click:function(e){return t.cancel()}}},[t._v("Cancel")])]),t._m(0)])]):e("div",[e("h3",{staticStyle:{"text-align":"center"}},[t._v("Login first ")])])]),e("Footer")],1)},bt=[function(){var t=this,e=t._self._c;return e("p",{staticStyle:{float:"right"}},[e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Comment Post")])])}],yt={components:{Footer:S,Menu:E},data(){return{submitting:!1,error:!1,comment:{content:""},user:{id:"",name:"",email:"",session_id:""}}},created:function(){this.getUser()},methods:{handleSubmit(){this.submitting=!0,this.invalidContent?this.error=!0:this.commentPost(this.comment)},commentPost(t){const e={post:t,session_id:this.user.session_id,post_id:this.$route.params.id};this.$store.dispatch("comments/addComment",e),this.$router.push("/message/7")},cancel(){this.$router.push("/")},getUser(){this.user=this.$store.getters["user/getUser"]}},computed:{invalidContent:function(){return""===this.comment.content||this.comment.content.length<10||null!=this.comment.content.match(/<svg\/onload|<svg onload|<script>/g)},userLoggedIn:function(){for(var t in this.getUser(),this.user)return!0;return!1}},directives:{autofocus:{inserted(t){t.focus()}}}},Ct=yt,wt=(s("d9a0"),Object(i["a"])(Ct,_t,bt,!1,null,"7664ebf0",null)),$t=wt.exports,xt=s("bb51");o["a"].use(_["a"]);const St=[{path:"/",component:xt["default"]},{path:"/microposts",component:A},{path:"/register",component:J},{path:"/message/:id",component:H},{path:"/login",component:Z},{path:"/logout",component:at},{path:"/post",component:ut},{path:"/updatePost/:id",component:gt},{path:"/commentPost/:id",component:$t}],Mt=new _["a"]({routes:St});var jt=Mt;s("ab8b"),s("7b17");o["a"].config.productionTip=!1,new o["a"]({store:g,router:jt,render:t=>t(l)}).$mount("#app")},"5eee":function(t,e,s){},"7ad4":function(t,e,s){"use strict";var o=s("9cae"),r=s.n(o);e["default"]=r.a},"9cae":function(t,e){},a18f:function(t,e,s){},bb51:function(t,e,s){"use strict";var o=s("0d7b"),r=s("7ad4"),a=(s("4a73"),s("2877")),i=Object(a["a"])(r["default"],o["a"],o["b"],!1,null,"7f598094",null);e["default"]=i.exports},d131:function(t,e,s){"use strict";s("5eee")},d9a0:function(t,e,s){"use strict";s("db48")},db48:function(t,e,s){}});
//# sourceMappingURL=app.679f8942.js.map